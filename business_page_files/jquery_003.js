!function(t,e,i){"use strict";var s,o,n,l,r,h,c,a,p,d,g,v,u,f,S,m,T,y,w,b,$;b={paneClass:"pane",sliderClass:"slider",contentClass:"content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},m="scrollbar",S="scroll",a="mousedown",p="mousemove",g="mousewheel",d="mouseup",f="resize",r="drag",y="up",u="panedown",n="DOMMouseScroll",l="down",w="wheel",h="keydown",c="keyup",T="touchmove",s="Microsoft Internet Explorer"===e.navigator.appName&&/msie 7./i.test(e.navigator.appVersion)&&e.ActiveXObject,o=null,$=function(){var t,e,s;return t=i.createElement("div"),e=t.style,e.position="absolute",e.width="100px",e.height="100px",e.overflow=S,e.top="-9999px",i.body.appendChild(t),s=t.offsetWidth-t.clientWidth,i.body.removeChild(t),s},v=function(){function h(s,n){this.el=s,this.options=n,o||(o=$()),this.$el=t(this.el),this.doc=t(this.options.documentContext||i),this.win=t(this.options.windowContext||e),this.$content=this.$el.children("."+n.contentClass),this.$content.attr("tabindex",0),this.content=this.$content[0],this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return h.prototype.preventScrolling=function(t,e){if(this.isActive)if(t.type===n)(e===l&&t.originalEvent.detail>0||e===y&&t.originalEvent.detail<0)&&t.preventDefault();else if(t.type===g){if(!t.originalEvent||!t.originalEvent.wheelDelta)return;(e===l&&t.originalEvent.wheelDelta<0||e===y&&t.originalEvent.wheelDelta>0)&&t.preventDefault()}},h.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},h.prototype.updateScrollValues=function(){var t;t=this.content,this.maxScrollTop=t.scrollHeight-t.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=t.scrollTop,this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},h.prototype.createEvents=function(){var t=this;this.events={down:function(e){return t.isBeingDragged=!0,t.offsetY=e.pageY-t.slider.offset().top,t.pane.addClass("active"),t.doc.bind(p,t.events[r]).bind(d,t.events[y]),!1},drag:function(e){return t.sliderY=e.pageY-t.$el.offset().top-t.offsetY,t.scroll(),t.updateScrollValues(),t.contentScrollTop>=t.maxScrollTop&&t.prevScrollTop!==t.maxScrollTop?t.$el.trigger("scrollend"):0===t.contentScrollTop&&0!==t.prevScrollTop&&t.$el.trigger("scrolltop"),!1},up:function(){return t.isBeingDragged=!1,t.pane.removeClass("active"),t.doc.unbind(p,t.events[r]).unbind(d,t.events[y]),!1},resize:function(){t.reset()},panedown:function(e){return t.sliderY=(e.offsetY||e.originalEvent.layerY)-.5*t.sliderHeight,t.scroll(),t.events.down(e),!1},scroll:function(e){t.isBeingDragged||(t.updateScrollValues(),t.iOSNativeScrolling||(t.sliderY=t.sliderTop,t.slider.css({top:t.sliderTop})),null!=e&&(t.contentScrollTop>=t.maxScrollTop?(t.options.preventPageScrolling&&t.preventScrolling(e,l),t.prevScrollTop!==t.maxScrollTop&&t.$el.trigger("scrollend")):0===t.contentScrollTop&&(t.options.preventPageScrolling&&t.preventScrolling(e,y),0!==t.prevScrollTop&&t.$el.trigger("scrolltop"))))},wheel:function(e){var i;return null!=e?(i=e.delta||e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.detail||e.originalEvent&&-e.originalEvent.detail,i&&(t.sliderY+=-i/3),t.scroll(),!1):void 0}}},h.prototype.addEvents=function(){var t;this.removeEvents(),t=this.events,this.options.disableResize||this.win.bind(f,t[f]),this.iOSNativeScrolling||(this.slider.bind(a,t[l]),this.pane.bind(a,t[u]).bind(""+g+" "+n,t[w])),this.$content.bind(""+S+" "+g+" "+n+" "+T,t[S])},h.prototype.removeEvents=function(){var t;t=this.events,this.win.unbind(f,t[f]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+S+" "+g+" "+n+" "+T,t[S])},h.prototype.generate=function(){var t,e,i,s,n;return i=this.options,s=i.paneClass,n=i.sliderClass,t=i.contentClass,this.$el.find(""+s).length||this.$el.find(""+n).length||this.$el.append('<div class="'+s+'"><div class="'+n+'" /></div>'),this.pane=this.$el.children("."+s),this.slider=this.pane.find("."+n),o&&(e={right:-o},this.$el.addClass("has-scrollbar")),null!=e&&this.$content.css(e),this},h.prototype.restore=function(){this.stopped=!1,this.pane.show(),this.addEvents()},h.prototype.reset=function(){var t,e,i,n,l,r,h,c,a,p;return this.iOSNativeScrolling?(this.contentHeight=this.content.scrollHeight,void 0):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),t=this.content,i=t.style,n=i.overflowY,s&&this.$content.css({height:this.$content.height()}),e=t.scrollHeight+o,a=parseInt(this.$el.css("max-height"),10),a>0&&(this.$el.height(""),this.$el.height(t.scrollHeight>a?a:t.scrollHeight)),r=this.pane.outerHeight(!1),c=parseInt(this.pane.css("top"),10),l=parseInt(this.pane.css("bottom"),10),h=r+c+l,p=Math.round(h/e*h),p<this.options.sliderMinHeight?p=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&p>this.options.sliderMaxHeight&&(p=this.options.sliderMaxHeight),n===S&&i.overflowX!==S&&(p+=o),this.maxSliderTop=h-p,this.contentHeight=e,this.paneHeight=r,this.paneOuterHeight=h,this.sliderHeight=p,this.slider.height(p),this.events.scroll(),this.pane.show(),this.isActive=!0,t.scrollHeight===t.clientHeight||this.pane.outerHeight(!0)>=t.scrollHeight&&n!==S?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===t.scrollHeight&&n===S?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),this)},h.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(-1*((this.paneHeight-this.contentHeight+o)*this.sliderY/this.maxSliderTop)),this.iOSNativeScrolling||this.slider.css({top:this.sliderY}),this):void 0},h.prototype.scrollBottom=function(t){return this.isActive?(this.reset(),this.$content.scrollTop(this.contentHeight-this.$content.height()-t).trigger(g),this):void 0},h.prototype.scrollTop=function(t){return this.isActive?(this.reset(),this.$content.scrollTop(+t).trigger(g),this):void 0},h.prototype.scrollTo=function(e){return this.isActive?(this.reset(),this.scrollTop(t(e).get(0).offsetTop),this):void 0},h.prototype.stop=function(){return this.stopped=!0,this.removeEvents(),this.pane.hide(),this},h.prototype.destroy=function(){return this.stopped||this.stop(),this.pane.length&&this.pane.remove(),s&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},h.prototype.flash=function(){var t=this;return this.isActive?(this.reset(),this.pane.addClass("flashed"),setTimeout(function(){t.pane.removeClass("flashed")},this.options.flashDelay),this):void 0},h}(),t.fn.nanoScroller=function(e){return this.each(function(){var i,s;if((s=this.nanoscroller)||(i=t.extend({},b,e),this.nanoscroller=s=new v(this,i)),e&&"object"==typeof e){if(t.extend(s.options,e),e.scrollBottom)return s.scrollBottom(e.scrollBottom);if(e.scrollTop)return s.scrollTop(e.scrollTop);if(e.scrollTo)return s.scrollTo(e.scrollTo);if("bottom"===e.scroll)return s.scrollBottom(0);if("top"===e.scroll)return s.scrollTop(0);if(e.scroll&&e.scroll instanceof t)return s.scrollTo(e.scroll);if(e.stop)return s.stop();if(e.destroy)return s.destroy();if(e.flash)return s.flash()}return s.reset()})}}(jQuery,window,document);